{"ast":null,"code":"var _jsxFileName = \"/Users/huunguyent./Desktop/homework1/huunguyen-STI0023-homework_1/src/pages/payment/index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport style from './style.module.scss';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport { useForm } from 'react-hook-form';\nimport * as yup from 'yup';\nimport * as CardValidator from 'card-validator';\nimport { useHistory } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { clearState } from '../../store/actions/ordered';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst schema = yup.object({\n  name: yup.string().required('Name is required'),\n  phoneNumber: yup.string().required('Phone number is required').matches(/^(\\+\\d{1,2}\\s?)?1?\\-?\\.?\\s?\\(?\\d{3}\\)?[\\s.-]?\\d{3}[\\s.-]?\\d{4}$/, 'Is not in correct format'),\n  houseNumber: yup.number().typeError('you must specify a number').required('House number is required'),\n  street: yup.string().required('Street is required'),\n  city: yup.string().required('City is required'),\n  postalCode: yup.string().required('Portal code code is required').test('errorPostalCode', 'error portal code', val => CardValidator.postalCode(val).isValid === true),\n  cardNumber: yup.string().required('Card number is required').test('errorCode', 'error card number', val => CardValidator.number(val).isValid === true),\n  expireDate: yup.string().required('Expire date is required').test('errorExpireDate', 'error expire date', val => CardValidator.expirationDate(val).isValid === true),\n  CVVCode: yup.string().required('CVV code is required').test('errorCVVCode', 'error CVV code', val => CardValidator.cvv(val).isValid === true)\n}).required();\n\nconst Payment = () => {\n  _s();\n\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    }\n  } = useForm({\n    mode: 'onBlur',\n    resolver: yupResolver(schema)\n  });\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const size = useSelector(state => state.orderReducer.size);\n  const toppings = useSelector(state => state.orderReducer.listTopping);\n  useEffect(() => {\n    if (toppings.length === 0 || Object.keys(size).length === 0) {\n      directToHomepage();\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, []);\n\n  const directToHomepage = () => {\n    history.push('/');\n  };\n\n  const onSubmit = data => {\n    const info = { ...data,\n      size: size.id,\n      toppings: toppings.map(item => item.id)\n    };\n    dispatch(clearState());\n    alert('Order successful !');\n    console.log(JSON.stringify(info));\n    directToHomepage();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: style.formInfo,\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: \"./images/banner.png\",\n      className: style.image,\n      alt: \"banner-pizza\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: style.form,\n      onSubmit: handleSubmit(onSubmit),\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: style.formTitle,\n        children: \"Customer Information\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: style.formDouble,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: style.labelText,\n            children: \"Name :\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: style.formInput,\n            placeholder: \"Your name or nickname...\",\n            ...register('name', {\n              required: true\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 13\n          }, this), errors.name && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: style.error,\n            children: errors.name.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: style.labelText,\n            children: \"Phone number :\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: style.formInput,\n            placeholder: \"Your telephone number...\",\n            ...register('phoneNumber', {\n              required: true\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, this), errors.phoneNumber && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: style.error,\n            children: errors.phoneNumber.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: style.formDouble,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: style.labelText,\n            children: \"House's number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: style.formInput,\n            ...register('houseNumber', {\n              required: true\n            }),\n            placeholder: \"Your house's number...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this), errors.houseNumber && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: style.error,\n            children: errors.houseNumber.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: style.labelText,\n            children: \"Street :\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: style.formInput,\n            placeholder: \"Street's name...\",\n            ...register('street', {\n              required: true\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 13\n          }, this), errors.street && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: style.error,\n            children: errors.street.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: style.formDouble,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: style.labelText,\n            children: \"City\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: style.formInput,\n            ...register('city', {\n              required: true\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 13\n          }, this), errors.city && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: style.error,\n            children: errors.city.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: style.labelText,\n            children: \"Postal code\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: style.formInput,\n            ...register('postalCode', {\n              required: true\n            }),\n            placeholder: \"postal code...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this), errors.postalCode && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: style.error,\n            children: errors.postalCode.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: style.labelText,\n          children: \"Credit card :\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: style.formInput,\n          placeholder: \"Card number...\",\n          ...register('cardNumber', {\n            required: true\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this), errors.cardNumber && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: style.error,\n          children: errors.cardNumber.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: style.formDouble,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: style.labelText,\n            children: \"Expiration date :\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: style.formInput,\n            placeholder: \"Expire date...\",\n            ...register('expireDate', {\n              required: true\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 13\n          }, this), errors.expireDate && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: style.error,\n            children: errors.expireDate.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: style.labelText,\n            children: \"CVV Code :\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: style.formInput,\n            placeholder: \"CVV code...\",\n            ...register('CVVCode', {\n              required: true\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 13\n          }, this), errors.CVVCode && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: style.error,\n            children: errors.CVVCode.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: style.formDouble,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: style.btnPrimary,\n          onClick: directToHomepage,\n          children: \"back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: style.btnPrimary,\n          children: \"submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: style.order\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Payment, \"fgRmHZIaXs8IkGk4q7dhUE/YYfs=\", false, function () {\n  return [useForm, useDispatch, useHistory, useSelector, useSelector];\n});\n\n_c = Payment;\nexport default Payment;\n\nvar _c;\n\n$RefreshReg$(_c, \"Payment\");","map":{"version":3,"sources":["/Users/huunguyent./Desktop/homework1/huunguyen-STI0023-homework_1/src/pages/payment/index.jsx"],"names":["React","useEffect","style","yupResolver","useForm","yup","CardValidator","useHistory","useSelector","useDispatch","clearState","schema","object","name","string","required","phoneNumber","matches","houseNumber","number","typeError","street","city","postalCode","test","val","isValid","cardNumber","expireDate","expirationDate","CVVCode","cvv","Payment","register","handleSubmit","formState","errors","mode","resolver","dispatch","history","size","state","orderReducer","toppings","listTopping","length","Object","keys","directToHomepage","push","onSubmit","data","info","id","map","item","alert","console","log","JSON","stringify","formInfo","image","form","formTitle","formDouble","labelText","formInput","error","message","btnPrimary","order"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport style from './style.module.scss';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport { useForm } from 'react-hook-form';\nimport * as yup from 'yup';\nimport * as CardValidator from 'card-validator';\nimport { useHistory } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { clearState } from '../../store/actions/ordered';\n\nconst schema = yup\n  .object({\n    name: yup.string().required('Name is required'),\n    phoneNumber: yup\n      .string()\n      .required('Phone number is required')\n      .matches(\n        /^(\\+\\d{1,2}\\s?)?1?\\-?\\.?\\s?\\(?\\d{3}\\)?[\\s.-]?\\d{3}[\\s.-]?\\d{4}$/,\n        'Is not in correct format'\n      ),\n    houseNumber: yup.number().typeError('you must specify a number').required('House number is required'),\n    street: yup.string().required('Street is required'),\n    city: yup.string().required('City is required'),\n    postalCode: yup\n      .string()\n      .required('Portal code code is required')\n      .test(\n        'errorPostalCode',\n        'error portal code',\n        (val) => CardValidator.postalCode(val).isValid === true\n      ),\n    cardNumber: yup\n      .string()\n      .required('Card number is required')\n      .test(\n        'errorCode',\n        'error card number',\n        (val) => CardValidator.number(val).isValid === true\n      ),\n    expireDate: yup\n      .string()\n      .required('Expire date is required')\n      .test(\n        'errorExpireDate',\n        'error expire date',\n        (val) => CardValidator.expirationDate(val).isValid === true\n      ),\n    CVVCode: yup\n      .string()\n      .required('CVV code is required')\n      .test(\n        'errorCVVCode',\n        'error CVV code',\n        (val) => CardValidator.cvv(val).isValid === true\n      ),\n  })\n  .required();\n\nconst Payment = () => {\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm({\n    mode: 'onBlur',\n    resolver: yupResolver(schema),\n  });\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n\n  const size = useSelector((state) => state.orderReducer.size);\n  const toppings = useSelector((state) => state.orderReducer.listTopping);\n\n  useEffect(() => {\n    if (toppings.length === 0 || Object.keys(size).length === 0) {\n      directToHomepage();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const directToHomepage = () => {\n    history.push('/');\n  };\n\n  const onSubmit = (data) => {\n    const info = {\n      ...data,\n      size: size.id,\n      toppings: toppings.map((item) => item.id),\n    };\n    dispatch(clearState());\n    alert('Order successful !');\n    console.log(JSON.stringify(info));\n    directToHomepage();\n  };\n\n  return (\n    <div className={style.formInfo}>\n      <img\n        src='./images/banner.png'\n        className={style.image}\n        alt='banner-pizza'\n      />\n      <form className={style.form} onSubmit={handleSubmit(onSubmit)}>\n        <h2 className={style.formTitle}>Customer Information</h2>\n        <div className={style.formDouble}>\n          <label>\n            <span className={style.labelText}>Name :</span>\n            <input\n              className={style.formInput}\n              placeholder='Your name or nickname...'\n              {...register('name', { required: true })}\n            />\n            {errors.name && (\n              <span className={style.error}>{errors.name.message}</span>\n            )}\n          </label>\n          <label>\n            <span className={style.labelText}>Phone number :</span>\n            <input\n              className={style.formInput}\n              placeholder='Your telephone number...'\n              {...register('phoneNumber', { required: true })}\n            />\n            {errors.phoneNumber && (\n              <span className={style.error}>{errors.phoneNumber.message}</span>\n            )}\n          </label>\n        </div>\n\n        <div className={style.formDouble}>\n          <label>\n            <span className={style.labelText}>House's number</span>\n            <input\n              className={style.formInput}\n              {...register('houseNumber', { required: true })}\n              placeholder=\"Your house's number...\"\n            />\n            {errors.houseNumber && (\n              <span className={style.error}>{errors.houseNumber.message}</span>\n            )}\n          </label>\n          <label>\n            <span className={style.labelText}>Street :</span>\n            <input\n              className={style.formInput}\n              placeholder=\"Street's name...\"\n              {...register('street', { required: true })}\n            />\n            {errors.street && (\n              <span className={style.error}>{errors.street.message}</span>\n            )}\n          </label>\n        </div>\n\n        <div className={style.formDouble}>\n          <label>\n            <span className={style.labelText}>City</span>\n            <input\n              className={style.formInput}\n              {...register('city', { required: true })}\n            />\n            {errors.city && (\n              <span className={style.error}>{errors.city.message}</span>\n            )}\n          </label>\n          <label>\n            <span className={style.labelText}>Postal code</span>\n            <input\n              className={style.formInput}\n              {...register('postalCode', { required: true })}\n              placeholder='postal code...'\n            />\n            {errors.postalCode && (\n              <span className={style.error}>{errors.postalCode.message}</span>\n            )}\n          </label>\n        </div>\n\n        <label>\n          <span className={style.labelText}>Credit card :</span>\n          <input\n            className={style.formInput}\n            placeholder='Card number...'\n            {...register('cardNumber', { required: true })}\n          />\n          {errors.cardNumber && (\n            <span className={style.error}>{errors.cardNumber.message}</span>\n          )}\n        </label>\n        <div className={style.formDouble}>\n          <label>\n            <span className={style.labelText}>Expiration date :</span>\n            <input\n              className={style.formInput}\n              placeholder='Expire date...'\n              {...register('expireDate', { required: true })}\n            />\n            {errors.expireDate && (\n              <span className={style.error}>{errors.expireDate.message}</span>\n            )}\n          </label>\n          <label>\n            <span className={style.labelText}>CVV Code :</span>\n            <input\n              className={style.formInput}\n              placeholder='CVV code...'\n              {...register('CVVCode', { required: true })}\n            />\n            {errors.CVVCode && (\n              <span className={style.error}>{errors.CVVCode.message}</span>\n            )}\n          </label>\n        </div>\n        <div className={style.formDouble}>\n          <button\n            type='button'\n            className={style.btnPrimary}\n            onClick={directToHomepage}\n          >\n            back\n          </button>\n          <button className={style.btnPrimary}>submit</button>\n        </div>\n      </form>\n      <div className={style.order}></div>\n    </div>\n  );\n};\n\nexport default Payment;\n"]},"metadata":{},"sourceType":"module"}